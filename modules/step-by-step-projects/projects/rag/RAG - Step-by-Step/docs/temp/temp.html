{% extends "base.html" %}

{% block title %}Home â€” Easy RAG{% endblock %}

{% block content %}
    <div class="flex h-screen bg-gray-100">

        <!-- ðŸ§± Sidebar -->
        <aside class="w-64 bg-gray-900 text-white flex flex-col justify-between">

            <!-- Buttons -->
            <div class="p-4">

                <div class="flex items-center justify-between p-2 hover:bg-gray-800 rounded">
                    <div class="flex space-x-1">
                        <a href="">
                            Workspace
                        </a>
                    </div>
                </div>

            </div>

            <!-- Logout -->
            <div class="p-4 border-t border-gray-700">
                <a href="{% url 'logout' %}"
                   class="block text-center text-red-400 hover:text-red-300">
                   Sair
                </a>
            </div>

        </aside>

        <!-- ðŸ’¬ Ãrea de chat -->
        <main class="flex-1 flex flex-col">

            <!-- Header -->
            <header class="bg-white shadow px-6 py-4">
                <h1 class="text-2xl font-semibold text-gray-800">
                    Bem-vindo, {{ request.user.username }}!
                </h1>
            </header>

            <!-- Chat messages -->
            <section id="chat-window" class="flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50">
                {% if chat_messages %}
                    {% for msg in chat_messages %}
                        <div class="p-4 rounded-lg {% if msg.sender == request.user.username %}bg-blue-100 ml-auto{% else %}bg-gray-200 mr-auto{% endif %} max-w-xl">
                            <p class="text-sm text-gray-700">
                                <strong>{{ msg.sender_name|default:msg.sender }}:</strong> {{ msg.text }}
                            </p>
                        </div>
                    {% endfor %}
                {% else %}
                    <p class="text-gray-500 text-center italic mt-10">
                        Nenhuma mensagem ainda. Seja o primeiro a enviar algo.
                    </p>
                {% endif %}
            </section>

            <!-- Input area -->
            <footer class="bg-white p-4 border-t flex items-center space-x-2">
                <form method="post" action="" class="flex w-full space-x-2">
                    {% csrf_token %}
                    <input type="text" name="message" id="message" placeholder="Digite sua mensagem..."
                        class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <button type="submit"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                        Enviar
                    </button>
                </form>
            </footer>
        </main>
    </div>
{% endblock %}
